{
  "format_version": "1.2",
  "terraform_version": "1.12.2",
  "variables": {
    "bucket_name": { "value": "my-terraform-s3-demo" },
    "region": { "value": "ap-northeast-1" }
  },
  "planned_values": {
    "outputs": {
      "aws_cloudfront_distribution_id": { "sensitive": false },
      "cloudfront_domain_name": { "sensitive": false },
      "s3_bucket_name": {
        "sensitive": false,
        "type": "string",
        "value": "my-terraform-s3-demo"
      },
      "s3_website_endpoint": { "sensitive": false }
    },
    "root_module": {
      "resources": [
        {
          "address": "aws_cloudfront_distribution.cdn",
          "mode": "managed",
          "type": "aws_cloudfront_distribution",
          "name": "cdn",
          "provider_name": "registry.terraform.io/hashicorp/aws",
          "schema_version": 1,
          "values": {
            "aliases": null,
            "comment": null,
            "custom_error_response": [],
            "default_cache_behavior": [
              {
                "allowed_methods": ["GET", "HEAD"],
                "cache_policy_id": null,
                "cached_methods": ["GET", "HEAD"],
                "compress": false,
                "field_level_encryption_id": null,
                "forwarded_values": [],
                "function_association": [],
                "lambda_function_association": [],
                "min_ttl": 0,
                "origin_request_policy_id": null,
                "realtime_log_config_arn": null,
                "response_headers_policy_id": null,
                "smooth_streaming": null,
                "viewer_protocol_policy": "redirect-to-https"
              }
            ],
            "default_root_object": "index.html",
            "enabled": true,
            "http_version": "http2",
            "is_ipv6_enabled": false,
            "logging_config": [],
            "ordered_cache_behavior": [],
            "origin": [
              {
                "connection_attempts": 3,
                "connection_timeout": 10,
                "custom_header": [],
                "custom_origin_config": [],
                "origin_access_control_id": "",
                "origin_path": "",
                "origin_shield": [],
                "s3_origin_config": [],
                "vpc_origin_config": []
              }
            ],
            "origin_group": [],
            "price_class": "PriceClass_All",
            "restrictions": [
              { "geo_restriction": [{ "restriction_type": "none" }] }
            ],
            "retain_on_delete": false,
            "staging": false,
            "tags": null,
            "viewer_certificate": [
              {
                "acm_certificate_arn": null,
                "cloudfront_default_certificate": true,
                "iam_certificate_id": null,
                "minimum_protocol_version": "TLSv1",
                "ssl_support_method": null
              }
            ],
            "wait_for_deployment": true,
            "web_acl_id": null
          },
          "sensitive_values": {
            "custom_error_response": [],
            "default_cache_behavior": [
              {
                "allowed_methods": [false, false],
                "cached_methods": [false, false],
                "forwarded_values": [],
                "function_association": [],
                "grpc_config": [],
                "lambda_function_association": [],
                "trusted_key_groups": [],
                "trusted_signers": []
              }
            ],
            "logging_config": [],
            "ordered_cache_behavior": [],
            "origin": [
              {
                "custom_header": [],
                "custom_origin_config": [],
                "origin_shield": [],
                "s3_origin_config": [],
                "vpc_origin_config": []
              }
            ],
            "origin_group": [],
            "restrictions": [{ "geo_restriction": [{ "locations": [] }] }],
            "tags_all": {},
            "trusted_key_groups": [],
            "trusted_signers": [],
            "viewer_certificate": [{}]
          }
        },
        {
          "address": "aws_s3_bucket.static_site",
          "mode": "managed",
          "type": "aws_s3_bucket",
          "name": "static_site",
          "provider_name": "registry.terraform.io/hashicorp/aws",
          "schema_version": 0,
          "values": {
            "bucket": "my-terraform-s3-demo",
            "force_destroy": false,
            "tags": null,
            "timeouts": null
          },
          "sensitive_values": {
            "cors_rule": [],
            "grant": [],
            "lifecycle_rule": [],
            "logging": [],
            "object_lock_configuration": [],
            "replication_configuration": [],
            "server_side_encryption_configuration": [],
            "tags_all": {},
            "versioning": [],
            "website": []
          }
        },
        {
          "address": "aws_s3_bucket_policy.public_policy",
          "mode": "managed",
          "type": "aws_s3_bucket_policy",
          "name": "public_policy",
          "provider_name": "registry.terraform.io/hashicorp/aws",
          "schema_version": 0,
          "sensitive_values": {}
        },
        {
          "address": "aws_s3_bucket_website_configuration.site_config",
          "mode": "managed",
          "type": "aws_s3_bucket_website_configuration",
          "name": "site_config",
          "provider_name": "registry.terraform.io/hashicorp/aws",
          "schema_version": 0,
          "values": {
            "error_document": [],
            "expected_bucket_owner": null,
            "index_document": [{ "suffix": "index.html" }],
            "redirect_all_requests_to": []
          },
          "sensitive_values": {
            "error_document": [],
            "index_document": [{}],
            "redirect_all_requests_to": [],
            "routing_rule": []
          }
        }
      ]
    }
  },
  "resource_changes": [
    {
      "address": "aws_cloudfront_distribution.cdn",
      "mode": "managed",
      "type": "aws_cloudfront_distribution",
      "name": "cdn",
      "provider_name": "registry.terraform.io/hashicorp/aws",
      "change": {
        "actions": ["create"],
        "before": null,
        "after": {
          "aliases": null,
          "comment": null,
          "custom_error_response": [],
          "default_cache_behavior": [
            {
              "allowed_methods": ["GET", "HEAD"],
              "cache_policy_id": null,
              "cached_methods": ["GET", "HEAD"],
              "compress": false,
              "field_level_encryption_id": null,
              "forwarded_values": [],
              "function_association": [],
              "lambda_function_association": [],
              "min_ttl": 0,
              "origin_request_policy_id": null,
              "realtime_log_config_arn": null,
              "response_headers_policy_id": null,
              "smooth_streaming": null,
              "viewer_protocol_policy": "redirect-to-https"
            }
          ],
          "default_root_object": "index.html",
          "enabled": true,
          "http_version": "http2",
          "is_ipv6_enabled": false,
          "logging_config": [],
          "ordered_cache_behavior": [],
          "origin": [
            {
              "connection_attempts": 3,
              "connection_timeout": 10,
              "custom_header": [],
              "custom_origin_config": [],
              "origin_access_control_id": "",
              "origin_path": "",
              "origin_shield": [],
              "s3_origin_config": [],
              "vpc_origin_config": []
            }
          ],
          "origin_group": [],
          "price_class": "PriceClass_All",
          "restrictions": [
            { "geo_restriction": [{ "restriction_type": "none" }] }
          ],
          "retain_on_delete": false,
          "staging": false,
          "tags": null,
          "viewer_certificate": [
            {
              "acm_certificate_arn": null,
              "cloudfront_default_certificate": true,
              "iam_certificate_id": null,
              "minimum_protocol_version": "TLSv1",
              "ssl_support_method": null
            }
          ],
          "wait_for_deployment": true,
          "web_acl_id": null
        },
        "after_unknown": {
          "arn": true,
          "caller_reference": true,
          "continuous_deployment_policy_id": true,
          "custom_error_response": [],
          "default_cache_behavior": [
            {
              "allowed_methods": [false, false],
              "cached_methods": [false, false],
              "default_ttl": true,
              "forwarded_values": [],
              "function_association": [],
              "grpc_config": true,
              "lambda_function_association": [],
              "max_ttl": true,
              "target_origin_id": true,
              "trusted_key_groups": true,
              "trusted_signers": true
            }
          ],
          "domain_name": true,
          "etag": true,
          "hosted_zone_id": true,
          "id": true,
          "in_progress_validation_batches": true,
          "last_modified_time": true,
          "logging_config": [],
          "ordered_cache_behavior": [],
          "origin": [
            {
              "custom_header": [],
              "custom_origin_config": [],
              "domain_name": true,
              "origin_id": true,
              "origin_shield": [],
              "s3_origin_config": [],
              "vpc_origin_config": []
            }
          ],
          "origin_group": [],
          "restrictions": [{ "geo_restriction": [{ "locations": true }] }],
          "status": true,
          "tags_all": true,
          "trusted_key_groups": true,
          "trusted_signers": true,
          "viewer_certificate": [{}]
        },
        "before_sensitive": false,
        "after_sensitive": {
          "custom_error_response": [],
          "default_cache_behavior": [
            {
              "allowed_methods": [false, false],
              "cached_methods": [false, false],
              "forwarded_values": [],
              "function_association": [],
              "grpc_config": [],
              "lambda_function_association": [],
              "trusted_key_groups": [],
              "trusted_signers": []
            }
          ],
          "logging_config": [],
          "ordered_cache_behavior": [],
          "origin": [
            {
              "custom_header": [],
              "custom_origin_config": [],
              "origin_shield": [],
              "s3_origin_config": [],
              "vpc_origin_config": []
            }
          ],
          "origin_group": [],
          "restrictions": [{ "geo_restriction": [{ "locations": [] }] }],
          "tags_all": {},
          "trusted_key_groups": [],
          "trusted_signers": [],
          "viewer_certificate": [{}]
        }
      }
    },
    {
      "address": "aws_s3_bucket.static_site",
      "mode": "managed",
      "type": "aws_s3_bucket",
      "name": "static_site",
      "provider_name": "registry.terraform.io/hashicorp/aws",
      "change": {
        "actions": ["create"],
        "before": null,
        "after": {
          "bucket": "my-terraform-s3-demo",
          "force_destroy": false,
          "tags": null,
          "timeouts": null
        },
        "after_unknown": {
          "acceleration_status": true,
          "acl": true,
          "arn": true,
          "bucket_domain_name": true,
          "bucket_prefix": true,
          "bucket_regional_domain_name": true,
          "cors_rule": true,
          "grant": true,
          "hosted_zone_id": true,
          "id": true,
          "lifecycle_rule": true,
          "logging": true,
          "object_lock_configuration": true,
          "object_lock_enabled": true,
          "policy": true,
          "region": true,
          "replication_configuration": true,
          "request_payer": true,
          "server_side_encryption_configuration": true,
          "tags_all": true,
          "versioning": true,
          "website": true,
          "website_domain": true,
          "website_endpoint": true
        },
        "before_sensitive": false,
        "after_sensitive": {
          "cors_rule": [],
          "grant": [],
          "lifecycle_rule": [],
          "logging": [],
          "object_lock_configuration": [],
          "replication_configuration": [],
          "server_side_encryption_configuration": [],
          "tags_all": {},
          "versioning": [],
          "website": []
        }
      }
    },
    {
      "address": "aws_s3_bucket_policy.public_policy",
      "mode": "managed",
      "type": "aws_s3_bucket_policy",
      "name": "public_policy",
      "provider_name": "registry.terraform.io/hashicorp/aws",
      "change": {
        "actions": ["create"],
        "before": null,
        "after": {},
        "after_unknown": { "bucket": true, "id": true, "policy": true },
        "before_sensitive": false,
        "after_sensitive": {}
      }
    },
    {
      "address": "aws_s3_bucket_website_configuration.site_config",
      "mode": "managed",
      "type": "aws_s3_bucket_website_configuration",
      "name": "site_config",
      "provider_name": "registry.terraform.io/hashicorp/aws",
      "change": {
        "actions": ["create"],
        "before": null,
        "after": {
          "error_document": [],
          "expected_bucket_owner": null,
          "index_document": [{ "suffix": "index.html" }],
          "redirect_all_requests_to": []
        },
        "after_unknown": {
          "bucket": true,
          "error_document": [],
          "id": true,
          "index_document": [{}],
          "redirect_all_requests_to": [],
          "routing_rule": true,
          "routing_rules": true,
          "website_domain": true,
          "website_endpoint": true
        },
        "before_sensitive": false,
        "after_sensitive": {
          "error_document": [],
          "index_document": [{}],
          "redirect_all_requests_to": [],
          "routing_rule": []
        }
      }
    }
  ],
  "output_changes": {
    "aws_cloudfront_distribution_id": {
      "actions": ["create"],
      "before": null,
      "after_unknown": true,
      "before_sensitive": false,
      "after_sensitive": false
    },
    "cloudfront_domain_name": {
      "actions": ["create"],
      "before": null,
      "after_unknown": true,
      "before_sensitive": false,
      "after_sensitive": false
    },
    "s3_bucket_name": {
      "actions": ["create"],
      "before": null,
      "after": "my-terraform-s3-demo",
      "after_unknown": false,
      "before_sensitive": false,
      "after_sensitive": false
    },
    "s3_website_endpoint": {
      "actions": ["create"],
      "before": null,
      "after_unknown": true,
      "before_sensitive": false,
      "after_sensitive": false
    }
  },
  "prior_state": {
    "format_version": "1.0",
    "terraform_version": "1.12.2",
    "values": {
      "outputs": {
        "s3_bucket_name": {
          "sensitive": false,
          "value": "my-terraform-s3-demo",
          "type": "string"
        }
      },
      "root_module": {}
    }
  },
  "configuration": {
    "provider_config": {
      "aws": {
        "name": "aws",
        "full_name": "registry.terraform.io/hashicorp/aws",
        "version_constraint": "~\u003e 5.0",
        "expressions": { "region": { "references": ["var.region"] } }
      }
    },
    "root_module": {
      "outputs": {
        "aws_cloudfront_distribution_id": {
          "expression": {
            "references": [
              "aws_cloudfront_distribution.cdn.id",
              "aws_cloudfront_distribution.cdn"
            ]
          },
          "description": "The ID of the CloudFront distribution"
        },
        "cloudfront_domain_name": {
          "expression": {
            "references": [
              "aws_cloudfront_distribution.cdn.domain_name",
              "aws_cloudfront_distribution.cdn"
            ]
          },
          "description": "The domain name of the CloudFront distribution"
        },
        "s3_bucket_name": {
          "expression": {
            "references": [
              "aws_s3_bucket.static_site.bucket",
              "aws_s3_bucket.static_site"
            ]
          },
          "description": "Name of the S3 bucket hosting the static site"
        },
        "s3_website_endpoint": {
          "expression": {
            "references": [
              "aws_s3_bucket.static_site.bucket_regional_domain_name",
              "aws_s3_bucket.static_site"
            ]
          },
          "description": "Website endpoint of the S3 bucket"
        }
      },
      "resources": [
        {
          "address": "aws_cloudfront_distribution.cdn",
          "mode": "managed",
          "type": "aws_cloudfront_distribution",
          "name": "cdn",
          "provider_config_key": "aws",
          "expressions": {
            "default_cache_behavior": [
              {
                "allowed_methods": { "constant_value": ["GET", "HEAD"] },
                "cached_methods": { "constant_value": ["GET", "HEAD"] },
                "target_origin_id": {
                  "references": [
                    "aws_s3_bucket.static_site.id",
                    "aws_s3_bucket.static_site"
                  ]
                },
                "viewer_protocol_policy": {
                  "constant_value": "redirect-to-https"
                }
              }
            ],
            "default_root_object": { "constant_value": "index.html" },
            "enabled": { "constant_value": true },
            "origin": [
              {
                "domain_name": {
                  "references": [
                    "aws_s3_bucket.static_site.bucket_regional_domain_name",
                    "aws_s3_bucket.static_site"
                  ]
                },
                "origin_id": {
                  "references": [
                    "aws_s3_bucket.static_site.id",
                    "aws_s3_bucket.static_site"
                  ]
                }
              }
            ],
            "restrictions": [
              {
                "geo_restriction": [
                  { "restriction_type": { "constant_value": "none" } }
                ]
              }
            ],
            "viewer_certificate": [
              { "cloudfront_default_certificate": { "constant_value": true } }
            ]
          },
          "schema_version": 1
        },
        {
          "address": "aws_s3_bucket.static_site",
          "mode": "managed",
          "type": "aws_s3_bucket",
          "name": "static_site",
          "provider_config_key": "aws",
          "expressions": { "bucket": { "references": ["var.bucket_name"] } },
          "schema_version": 0
        },
        {
          "address": "aws_s3_bucket_policy.public_policy",
          "mode": "managed",
          "type": "aws_s3_bucket_policy",
          "name": "public_policy",
          "provider_config_key": "aws",
          "expressions": {
            "bucket": {
              "references": [
                "aws_s3_bucket.static_site.id",
                "aws_s3_bucket.static_site"
              ]
            },
            "policy": {
              "references": [
                "aws_s3_bucket.static_site.arn",
                "aws_s3_bucket.static_site"
              ]
            }
          },
          "schema_version": 0
        },
        {
          "address": "aws_s3_bucket_website_configuration.site_config",
          "mode": "managed",
          "type": "aws_s3_bucket_website_configuration",
          "name": "site_config",
          "provider_config_key": "aws",
          "expressions": {
            "bucket": {
              "references": [
                "aws_s3_bucket.static_site.id",
                "aws_s3_bucket.static_site"
              ]
            },
            "index_document": [{ "suffix": { "constant_value": "index.html" } }]
          },
          "schema_version": 0
        }
      ],
      "variables": {
        "bucket_name": { "description": "S3バケット名（ユニーク）" },
        "region": { "default": "ap-northeast-1" }
      }
    }
  },
  "relevant_attributes": [
    { "resource": "aws_s3_bucket.static_site", "attribute": ["arn"] },
    { "resource": "aws_s3_bucket.static_site", "attribute": ["id"] },
    {
      "resource": "aws_cloudfront_distribution.cdn",
      "attribute": ["domain_name"]
    },
    { "resource": "aws_cloudfront_distribution.cdn", "attribute": ["id"] },
    { "resource": "aws_s3_bucket.static_site", "attribute": ["bucket"] },
    {
      "resource": "aws_s3_bucket.static_site",
      "attribute": ["bucket_regional_domain_name"]
    }
  ],
  "timestamp": "2025-10-25T07:59:56Z",
  "applyable": true,
  "complete": true,
  "errored": false
}
